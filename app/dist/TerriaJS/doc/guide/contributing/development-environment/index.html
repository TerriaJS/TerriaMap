



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.2, mkdocs-material-2.2.3">
    
    
      
        <title>Development Environment - TerriaJS</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.bcabdff3.css">
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="TerriaJS" class="md-header-nav__button md-logo">
          
            <img src="../../terria.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                TerriaJS
              </span>
              <span class="md-header-nav__topic">
                Development Environment
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../../terria.png" width="24" height="24">
      
    </span>
    TerriaJS
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../getting-started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Customizing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Customizing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../customizing/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../customizing/client-side-config/" title="Client-side Config" class="md-nav__link">
      Client-side Config
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../customizing/initialization-files/" title="Initialization Files" class="md-nav__link">
      Initialization Files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../customizing/server-side-config/" title="Server-side Config" class="md-nav__link">
      Server-side Config
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../customizing/skinning/" title="Skinning" class="md-nav__link">
      Skinning
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Connecting to Data
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Connecting to Data
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/cross-origin-resource-sharing/" title="Cross-Origin Resource Sharing" class="md-nav__link">
      Cross-Origin Resource Sharing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-groups/" title="Catalog Groups" class="md-nav__link">
      Catalog Groups
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-items/" title="Catalog Items" class="md-nav__link">
      Catalog Items
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-5" type="checkbox" id="nav-4-5">
    
    <label class="md-nav__link" for="nav-4-5">
      Customizing Data Appearance
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-5">
        Customizing Data Appearance
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/customizing-data-appearance/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/customizing-data-appearance/imagery-data/" title="Imagery Data" class="md-nav__link">
      Imagery Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/customizing-data-appearance/tabular-data/" title="Tabular Data" class="md-nav__link">
      Tabular Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/customizing-data-appearance/feature-info-template/" title="Feature Information Template" class="md-nav__link">
      Feature Information Template
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-functions/" title="Catalog Functions" class="md-nav__link">
      Catalog Functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-7" type="checkbox" id="nav-4-7">
    
    <label class="md-nav__link" for="nav-4-7">
      Catalog Type Details
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-7">
        Catalog Type Details
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/abs-itt-dataset-list/" title="ABS ITT (group)" class="md-nav__link">
      ABS ITT (group)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/abs-itt/" title="ABS ITT (item)" class="md-nav__link">
      ABS ITT (item)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/esri-featureServer-group/" title="ArcGIS FeatureServer (group)" class="md-nav__link">
      ArcGIS FeatureServer (group)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/esri-featureServer/" title="ArcGIS FeatureServer (item)" class="md-nav__link">
      ArcGIS FeatureServer (item)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/esri-mapServer-group/" title="ArcGIS MapServer (group)" class="md-nav__link">
      ArcGIS MapServer (group)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/esri-mapServer/" title="ArcGIS MapServer (item)" class="md-nav__link">
      ArcGIS MapServer (item)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/esri-group/" title="ArcGIS Server (group)" class="md-nav__link">
      ArcGIS Server (group)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/bing-maps/" title="Bing Maps (item)" class="md-nav__link">
      Bing Maps (item)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/carto/" title="Carto Map (item)" class="md-nav__link">
      Carto Map (item)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/csw/" title="Catalog Service for the Web (CSW) (group)" class="md-nav__link">
      Catalog Service for the Web (CSW) (group)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/3d-tiles/" title="Cesium 3D Tiles (item)" class="md-nav__link">
      Cesium 3D Tiles (item)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/ion-imagery/" title="Cesium Ion Imagery (item)" class="md-nav__link">
      Cesium Ion Imagery (item)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/czml/" title="Cesium Language (CZML) (item)" class="md-nav__link">
      Cesium Language (CZML) (item)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/cesium-terrain/" title="Cesium Terrain (item)" class="md-nav__link">
      Cesium Terrain (item)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/ckan/" title="CKAN (group)" class="md-nav__link">
      CKAN (group)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/ckan-resource/" title="CKAN Resource (item)" class="md-nav__link">
      CKAN Resource (item)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/csv/" title="Comma-Separated Values (CSV) (item)" class="md-nav__link">
      Comma-Separated Values (CSV) (item)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/composite/" title="Composite (item)" class="md-nav__link">
      Composite (item)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/ogr/" title="Format Conversion Service (based on OGR) (item)" class="md-nav__link">
      Format Conversion Service (based on OGR) (item)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/geojson/" title="GeoJSON (item)" class="md-nav__link">
      GeoJSON (item)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/gpx/" title="GPX (item)" class="md-nav__link">
      GPX (item)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/group/" title="Group (Manual) (group)" class="md-nav__link">
      Group (Manual) (group)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/kml/" title="Keyhole Markup Language (KML) (item)" class="md-nav__link">
      Keyhole Markup Language (KML) (item)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/magda-distribution/" title="MAGDA Distribution (item)" class="md-nav__link">
      MAGDA Distribution (item)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/mapbox-map/" title="MapBox Map (item)" class="md-nav__link">
      MapBox Map (item)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/open-street-map/" title="OpenStreetMap (item)" class="md-nav__link">
      OpenStreetMap (item)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/places-like-me-function/" title="Places Like Me (function)" class="md-nav__link">
      Places Like Me (function)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/sdmx-json/" title="SDMX-JSON (item)" class="md-nav__link">
      SDMX-JSON (item)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/sos/" title="Sensor Observation Service (SOS) (item)" class="md-nav__link">
      Sensor Observation Service (SOS) (item)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/socrata/" title="Socrata (group)" class="md-nav__link">
      Socrata (group)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/spatial-detailing-function/" title="Spatial Detailing (function)" class="md-nav__link">
      Spatial Detailing (function)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/terria-json/" title="TerriaJS JSON (function)" class="md-nav__link">
      TerriaJS JSON (function)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/url-template/" title="URL Template (item)" class="md-nav__link">
      URL Template (item)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/wfs-getCapabilities/" title="Web Feature Service (WFS) (group)" class="md-nav__link">
      Web Feature Service (WFS) (group)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/wfs/" title="Web Feature Service (WFS) (item)" class="md-nav__link">
      Web Feature Service (WFS) (item)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/wms-getCapabilities/" title="Web Map Service (WMS) (group)" class="md-nav__link">
      Web Map Service (WMS) (group)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/wms/" title="Web Map Service (WMS) (item)" class="md-nav__link">
      Web Map Service (WMS) (item)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/wps/" title="Web Processing Service (WPS) (function)" class="md-nav__link">
      Web Processing Service (WPS) (function)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/wps-getCapabilities/" title="Web Processing Service (WPS) (group)" class="md-nav__link">
      Web Processing Service (WPS) (group)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/wfs-features-group/" title="WFS Features (group)" class="md-nav__link">
      WFS Features (group)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-data/catalog-type-details/why-am-i-special-function/" title="Why Am I Special (function)" class="md-nav__link">
      Why Am I Special (function)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Deploying
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Deploying
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploying/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploying/deploying-terriamap/" title="Deploying TerriaMap" class="md-nav__link">
      Deploying TerriaMap
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploying/deploying-to-aws/" title="Deploying to AWS" class="md-nav__link">
      Deploying to AWS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploying/deploying-with-kubernetes/" title="Deploying with Kubernetes" class="md-nav__link">
      Deploying with Kubernetes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploying/setting-up-a-region-mapping-server/" title="Setting Up a Region Mapping Server" class="md-nav__link">
      Setting Up a Region Mapping Server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploying/setting-up-geoserver/" title="Setting Up Geoserver" class="md-nav__link">
      Setting Up Geoserver
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploying/using-as-a-ckan-previewer/" title="Using as a CKAN Previewer" class="md-nav__link">
      Using as a CKAN Previewer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploying/controlling-with-url-parameters/" title="Controlling with URL Parameters" class="md-nav__link">
      Controlling with URL Parameters
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploying/controlling-in-an-iframe-or-popup/" title="Controlling in an &lt;iframe&gt; or Popup" class="md-nav__link">
      Controlling in an &lt;iframe&gt; or Popup
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked>
    
    <label class="md-nav__link" for="nav-6">
      Contributing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Contributing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Development Environment
      </label>
    
    <a href="./" title="Development Environment" class="md-nav__link md-nav__link--active">
      Development Environment
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#building-a-terriamap-against-a-modified-terriajs" title="Building a TerriaMap against a modified TerriaJS" class="md-nav__link">
    Building a TerriaMap against a modified TerriaJS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#committing-modifications" title="Committing modifications" class="md-nav__link">
    Committing modifications
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentation" title="Documentation" class="md-nav__link">
    Documentation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests-specs" title="Tests / Specs" class="md-nav__link">
    Tests / Specs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#terriajs-gulp-tasks" title="TerriaJS Gulp Tasks" class="md-nav__link">
    TerriaJS Gulp Tasks
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#terriamap-gulp-tasks" title="TerriaMap Gulp Tasks" class="md-nav__link">
    TerriaMap Gulp Tasks
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../architecture/" title="Architecture" class="md-nav__link">
      Architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../using-a-custom-version-of-cesium/" title="Using a Custom Version of Cesium" class="md-nav__link">
      Using a Custom Version of Cesium
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../setting-up-saucelabs/" title="Setting up Saucelabs" class="md-nav__link">
      Setting up Saucelabs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../problems-and-solutions/" title="Problems and Solutions" class="md-nav__link">
      Problems and Solutions
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#building-a-terriamap-against-a-modified-terriajs" title="Building a TerriaMap against a modified TerriaJS" class="md-nav__link">
    Building a TerriaMap against a modified TerriaJS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#committing-modifications" title="Committing modifications" class="md-nav__link">
    Committing modifications
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentation" title="Documentation" class="md-nav__link">
    Documentation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests-specs" title="Tests / Specs" class="md-nav__link">
    Tests / Specs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#terriajs-gulp-tasks" title="TerriaJS Gulp Tasks" class="md-nav__link">
    TerriaJS Gulp Tasks
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#terriamap-gulp-tasks" title="TerriaMap Gulp Tasks" class="md-nav__link">
    TerriaMap Gulp Tasks
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Development Environment</h1>
                
                <p>First, read <a href="../../getting-started/">Getting Started</a>.</p>
<h2 id="building-a-terriamap-against-a-modified-terriajs">Building a TerriaMap against a modified TerriaJS</h2>
<p>What if you need to make changes to <a href="https://github.com/TerriaJS/terriajs">TerriaJS</a> while working on a site that depends on it?</p>
<p>In the process described in <a href="../../getting-started/">Getting Started</a>, the <a href="https://www.npmjs.com/package/terriajs">TerriaJS package</a> is installed to the <code>node_modules</code> directory by <code>npm install</code>.  Please do not edit TerriaJS directly in the <code>node_modules</code> directory, because changes will be clobbered the next time you run <code>npm install</code>.</p>
<p>Instead, we want to clone TerriaJS from its <a href="https://github.com/TerriaJS/terriajs">GitHub repo</a> and use that in our TerriaMap build.  Traditionally, <code>npm link</code> is the way to do this.  However, we do not recommend use of <code>npm link</code> because it frequently leads to multiple copies of some libraries being installed, which in turn leads to all sorts of frustrating build problems.  Instead, we recommend <a href="https://yarnpkg.com">yarn</a> and its <a href="https://yarnpkg.com/lang/en/docs/workspaces/">workspaces</a> feature.  <code>yarn</code> workspaces let us safely clone a git repo into the <code>packages</code> directory and wire it into any other packages that use it.</p>
<p>First, install <code>yarn</code> globally:</p>
<pre><code>npm install -g yarn
</code></pre>

<p>If you already have yarn installed, make sure it is at least v1.0 (we recommend using the latest version).  Older versions do not support the workspace feature.</p>
<p>Then, enable workspaces by editing the TerriaMap <code>package.json</code> file, adding these lines to the top, just after the opening <code>{</code>:</p>
<pre><code class="json">  &quot;private&quot;: true,
  &quot;workspaces&quot;: [
    &quot;packages/*&quot;
  ],
</code></pre>

<p>Do <em>not</em> commit this change.</p>
<p>Now, you can clone any package (such as <code>terriajs</code> or <code>terriajs-cesium</code>) into the <code>packages</code> directory:</p>
<pre><code>mkdir packages
cd packages
git clone https://github.com/TerriaJS/terriajs.git
cd ..
</code></pre>

<p>This will give you the <code>master</code> branch of TerriaJS.  While we strive to keep <code>master</code> stable and usable at all times, you must be aware that <code>master</code> is less tested than actual releases, and it may not be commpatible with the <code>master</code> branch of TerriaMap.  So, you may want to check out the actual version of TerriaJS that you're using before you start making changes.  To do that:</p>
<pre><code>grep terriajs package.json
# will print something like: &quot;terriajs&quot;: &quot;^4.5.0&quot;
cd packages/terriajs
git checkout 4.5.0
cd ..
</code></pre>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The version of TerriaJS in your <code>packages/terriajs</code> directory must be semver-compatible with the version specification in TerriaMap's <code>package.json</code>. If it's not, yarn will install a separate semver-compatible version of TerriaJS in <code>node_modules</code> instead of using the one you've put in <code>packages/terriajs</code>. The version numbers are <em>usually</em> already aligned, but if not, change the <code>"terriajs": "x.y.z"</code> dependency in TerriaMap's <code>package.json</code> to be the exact <code>"version"</code> property in TerriaJS's <code>package.json</code>. You will generally not want to commit this change.</p>
</div>
<p>Then, in the TerriaMap directory, run:</p>
<pre><code>yarn install
</code></pre>

<p>Yarn will:</p>
<ul>
<li>Install all dependencies for both TerriaMap and any packages in your <code>packages</code> directory.</li>
<li>Install the <code>devDependencies</code> for packages in the <code>packages</code> directory so you can actually develop on them.</li>
<li>Create sym-links so that everything works.</li>
<li>De-duplicate semver-compatible packages and bubble them up to the root <code>node_modules</code> directory.</li>
</ul>
<p>Now, we can edit TerriaJS in <code>packages/terriajs</code> with the benefit of a full-featured git repo.</p>
<p>Confirm that yarn has configured TerriaMap to use the copy of TerriaJS in <code>packages/terriajs</code> by verifying that <code>node_modules/terriajs</code> is a symlink to <code>packages/terriajs</code>.  If it's not, you probably have a version conflict.  See the note above.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Running <code>yarn install</code> with workspaces configured will change <code>yarn.lock</code>.  Please do not commit the changes.</p>
</div>
<p>To switch TerriaMap back to using the npm version of TerriaJS (instead of the git repo), do:</p>
<pre><code># warning: make sure you don't need any of your changes to TerriaJS first!
rm -rf packages/terriajs
yarn install
</code></pre>

<h2 id="committing-modifications">Committing modifications</h2>
<p>If you make changes to TerriaJS and TerriaMap together, here's the process for getting them to production.</p>
<p>First, commit your TerriaJS changes to a branch and open a pull request to merge that branch to master. Simultaneously, you may want to make a branch of TerriaMap that uses your modified version of TerriaJS.  To do that, modify TerriaMap's <code>package.json</code>.  Where it has a line like:</p>
<pre><code>&quot;terriajs&quot;: &quot;^4.5.0&quot;,
</code></pre>

<p>Change it to:</p>
<pre><code>&quot;terriajs&quot;: &quot;git://github.com/TerriaJS/terriajs.git#branchName&quot;,
</code></pre>

<p>Replace <code>branchName</code> with the name of the TerriaJS branch you want to use.  You may even use a repository other than <code>TerriaJS/terriajs</code> if your branch is in a fork of TerriaJS instead of in the official repository.</p>
<p>Once your TerriaJS pull request has been merged and a new version of the <code>terriajs</code> npm module has been published, please remember to update <code>package.json</code> to point to an official <code>terriajs</code> version instead of a branch in a GitHub repo.</p>
<p>The <code>package.json</code> in the <code>master</code> branch of TerriaMap should point to official releases of <code>terriajs</code> on npm, NOT GitHub branches.  In other words, it is ok to commit a package.json with a git URL to a branch, but do <em>not</em> merge it to master.</p>
<h2 id="documentation">Documentation</h2>
<p>Documentation is automatically generated from the source via JSDoc (reference) and MkDocs (user guide) by running:</p>
<pre><code>npm run gulp docs
</code></pre>

<p>It will be placed in the <code>wwwroot/doc</code> folder.</p>
<p>You need a standalone install of MkDocs and the <code>mkdocs-material</code> theme in order to build the user guide. Install these by running:</p>
<pre><code>pip install -r doc/requirements.txt
</code></pre>

<h2 id="tests-specs">Tests / Specs</h2>
<p>We use <a href="https://jasmine.github.io/">Jasmine</a> for the TerriaJS tests, called specs in Jasmine parlance.  To run the specs, you first need to build them by running this in the TerriaJS  (not TerriaMap!) directory:</p>
<pre><code>npm run gulp
</code></pre>

<p>And start the development web server by running (also from the TerriaJS and not TerriaMap! directory):</p>
<pre><code>npm start
</code></pre>

<p>The test suite is run by opening a web browser on <a href="http://localhost:3002/SpecRunner.html">http://localhost:3002/SpecRunner.html</a>.  The source code for the specs is found in the <code>test/</code> directory.</p>
<h2 id="terriajs-gulp-tasks">TerriaJS Gulp Tasks</h2>
<p>Run any of these tasks with <code>npm run gulp &lt;task name&gt;</code> from within the TerriaJS directory:</p>
<ul>
<li>default - Invoked by running gulp without any arguments, this task invokes the <code>build</code> and <code>lint</code> tasks.</li>
<li><code>build</code> - Builds a non-minified version of the TerriaJS tests.  This task may take 10 seconds or more, which is the main reason for the next task.</li>
<li><code>watch</code> - Starts the same as <code>build</code> but then it stays running and watches for changes to any TerriaJS or Cesium source file that was pulled in to the build. When a change to any of these files is detected, a fast incremental build is automatically kicked off.  The incremental build is much faster than the full rebuild because dependencies between source files are cached.</li>
<li><code>release</code> - The same as <code>build</code> except that it also minifies the build tests.</li>
<li><code>lint</code> - Runs ESLint on the files in the <code>lib</code> folder and reports any problems.  The ESLint rules are defined in the <code>.eslintrc</code> file in the root directory of TerriaJS.  A stricter set of rules is also find in the <code>.eslintrc</code> file in <code>lib/ReactViews</code>.</li>
<li><code>docs</code> - Generates the user guide and reference documentation.  The user guide is served at <code>http://localhost:3002/doc/guide/</code> and the reference documentation is at <code>http://localhost:3002/doc/reference/</code>.</li>
<li><code>make-schema</code> - Generates <a href="http://json-schema.org/">JSON Schema</a> for the TerriaJS <a href="../../customizing/initialization-files/">Initialization Files</a> from the source code.  The schema is written to <code>wwwroot/schema</code>.</li>
<li><code>test</code> - Detects browsers available on the local system and launches the test suite in each.  The results are reported on the command line.</li>
<li><code>test-electron</code> - Runs the tests in Electron, a headless (no UI) Chrome-like browser.</li>
<li><code>test-saucelabs</code> - Runs the tests on a bunch of browsers on <a href="https://saucelabs.com/">Sauce Labs</a>.  You will need to <a href="../setting-up-saucelabs/">Set up Sauce Labs</a>.</li>
<li><code>test-browserstack</code> - Runs the tests on a bunch of browsers on <a href="https://www.browserstack.com/">BrowserStack</a>.  You will need to set up a BrowserStack account.</li>
</ul>
<p>See <code>gulpfile.js</code> for more gulp tasks.</p>
<h2 id="terriamap-gulp-tasks">TerriaMap Gulp Tasks</h2>
<p>Run any of these tasks with <code>npm run gulp &lt;task name&gt;</code> from within the TerriaMap directory:</p>
<ul>
<li>default - Invoked by running gulp without any arguments, this task invokes the <code>build</code> and <code>lint</code> tasks.</li>
<li><code>build</code> - Builds a non-minified version of TerriaMap, TerriaJS, Cesium, and all other dependencies, together in one JS file (called <code>wwwroot/build/TerriaMap.js</code>). Only the parts of TerriaJS and Cesium that we use (directly or indirectly) are pulled in.  Web Workers, CSS, and other resources are also built by this task.  This task may take 10 seconds or more, which is the main reason for the next task.</li>
<li><code>watch</code> - Starts the same as <code>build</code> but then it stays running and watches for changes to any TerriaMap, TerriaJS, or Cesium resource. When a change to any of these files is detected, a fast incremental build is automatically kicked off.  The incremental build is much faster than the full rebuild because dependencies between source files are cached.</li>
<li><code>release</code> - The same as <code>build</code> except that it also minifies the built JavaScript files.  This task should be used when building for production.</li>
<li><code>lint</code> - Runs ESLint on <code>index.js</code> and the files in the <code>lib</code> folder and reports any problems.  The ESLint rules are defined in the <code>.eslintrc</code> file in the root directory of TerriaMap.</li>
<li><code>make-package</code> - Creates a <code>.tar.gz</code> package in <code>deploy/packages</code> from the current build.  This package can be copied to another machine to run the application there.  The arguments are:</li>
</ul>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--packageName &lt;name&gt;</code></td>
<td>The name of the package.  If not specified, the name is <code>&lt;npm_package_name&gt;-&lt;git_describe&gt;</code>, where <code>&lt;npm_package_name&gt;</code> is the value of the <code>npm_package_name</code> environment variable and <code>&lt;git_describe&gt;</code> is the output of running <code>git describe</code>.  If you invoke this task using <code>npm run gulp make-package</code> instead of simply <code>gulp make-package</code>, the <code>npm_package_name</code> environment variable will be automatically set to the name of the project in <code>package.json</code>.</td>
</tr>
<tr>
<td><code>--serverConfigOverride &lt;file&gt;</code></td>
<td>The path to a file with overrides of the <code>devserverconfig.json</code> file.  If not specified, <code>devserverconfig.json</code> is used unmodified.</td>
</tr>
<tr>
<td><code>--clientConfigOverride &lt;file&gt;</code></td>
<td>The path to a file with overrides of the <code>wwwroot/config.json</code> file.  If not specified, <code>wwwroot/config.json</code> is used unmodified.</td>
</tr>
</tbody>
</table>
<ul>
<li><code>clean</code> - Removes the <code>wwwroot/build</code> directory.</li>
<li><code>sync-terriajs-dependencies</code> - For all npm packages used by both TerriaMap and TerriaJS, updates TerriaMap's <code>package.json</code> to use the same version as TerriaJS.  This avoids build problems (errors, hangs) caused by package version conflicts.</li>
</ul>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../" title="Overview" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Overview
              </span>
            </div>
          </a>
        
        
          <a href="../architecture/" title="Architecture" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Architecture
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.6cdc17f0.js"></script>
      
      <script>app.initialize({version:"0.17.2",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>